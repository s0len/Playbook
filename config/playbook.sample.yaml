######################################################################
# Playbook Sample Configuration
######################################################################
# This annotated example is designed to be copied to `playbook.yaml`
# and tweaked for your environment.
#
# KEY FEATURE: All supported sports are ENABLED BY DEFAULT!
# You don't need to define any sports - Playbook comes with built-in
# support for Formula 1, MotoGP, UFC, NFL, NBA, NHL, Premier League,
# Champions League, and more. Just configure your directories and go!
#
# To customize:
#   * Use `disabled_sports` to turn off sports you don't want
#   * Use the `sports` section to override specific sport settings
#   * Use `use_default_sports: false` to disable all defaults and
#     define only the sports you want manually
#
# Tips:
#   * Strings like ${SOURCE_DIR:-/data/source} can be overridden via env vars
#   * Templates such as "{season_number:02d}" use Python's format syntax
######################################################################

settings:
  ####################################################################
  # REQUIRED DIRECTORIES
  ####################################################################
  source_dir: ${SOURCE_DIR:-/data/source}       # Where Playbook looks for newly downloaded media files
  destination_dir: ${DESTINATION_DIR:-/data/destination} # Destination root for organized media
  cache_dir: ${CACHE_DIR:-/var/cache/playbook}  # Location for metadata caches and temp state

  ####################################################################
  # EXECUTION BEHAVIOUR
  ####################################################################
  dry_run: false          # When true, identify matches and log actions without touching the filesystem
  skip_existing: true     # When true, leave destinations alone unless a better source is detected
  link_mode: hardlink     # Global default for linking: hardlink | copy | symlink

  ####################################################################
  # DEFAULT SPORTS (NEW IN 2.7.0)
  ####################################################################
  # All TVSportsDB-supported sports are enabled by default. Playbook
  # automatically handles Formula 1, MotoGP, UFC, NFL, NBA, NHL,
  # Premier League, Champions League, Figure Skating, and more.
  #
  # Source globs are computed automatically from pattern templates,
  # so new patterns added in updates will work immediately.

  use_default_sports: true  # Set to false to disable all defaults

  # Disable specific sports you don't want (by base ID):
  disabled_sports: []
    # - formula_e       # Uncomment to disable Formula E
    # - moto2           # Uncomment to disable Moto2
    # - moto3           # Uncomment to disable Moto3
    # - figure_skating_grand_prix

  ####################################################################
  # QUALITY MANAGEMENT (OPTIONAL)
  ####################################################################
  # Score-based upgrade system for replacing files with higher quality releases.
  # When enabled, Playbook computes a quality score for each file based on
  # resolution, source, release group, frame rate, and other attributes.
  #
  # SCORING: Total = resolution + source + release_group + frame_rate + bonuses
  # CUTOFF: Stop upgrading when the existing file reaches this score
  # MIN_SCORE: Reject files below this threshold
  # PROPER/REPACK: Always upgrade regardless of cutoff (corrected releases)
  quality_profile:
    enabled: false        # Set to true to enable quality-based upgrades
    scoring:
      resolution:         # Resolution scores (higher = better)
        2160p: 400
        1080p: 300
        720p: 200
        576p: 150
        480p: 100
      source:             # Source type scores (higher = better)
        bluray: 100
        webdl: 90
        webrip: 70
        hdtv: 50
        sdtv: 30
        dvdrip: 40
      frame_rate:         # Frame rate scores (critical for sports)
        "60": 100         # 60fps ideal for fast action
        "50": 75          # 50fps (PAL regions)
        "30": 25
        "25": 0
        "24": 0
      release_group:      # Preferred release groups (add your favorites)
        # mwr: 50         # Uncomment and add groups you prefer
        # verum: 40
        # nightninjas: 30
      proper_bonus: 50    # Bonus points for PROPER releases
      repack_bonus: 50    # Bonus points for REPACK releases
      hdr_bonus: 25       # Bonus points for HDR content
    cutoff: 350           # Stop upgrading at this score (null = no limit)
    min_score: 100        # Reject files below this score (null = no minimum)

  ####################################################################
  # NOTIFICATIONS (OPTIONAL)
  ####################################################################
  notifications:
    batch_daily: false    # When true, send one message per sport/day
    summary_mode: false   # When true, send one summary notification per scan
    flush_time: "00:00"   # Local HH:MM boundary for the batching day rollover
    mentions:             # Optional: ping specific Discord roles/users per sport
      premier_league: "<@&123456789012345678>"
      formula1: "<@&222333444555666777>"
      # default: "@here"  # Fallback mention when a sport ID isn't listed
    targets:              # Define at least one target
      - type: discord
        webhook_env: DISCORD_WEBHOOK_URL
        mentions:
          formula1: "<@&222333444555666777>"
      - type: autoscan
        url: ${AUTOSCAN_URL:-http://autoscan:3030}
        trigger: manual
        username: ${AUTOSCAN_USERNAME:-}
        password: ${AUTOSCAN_PASSWORD:-}
        rewrite:
          - from: ${DESTINATION_DIR:-/data/destination}
            to: /mnt/unionfs/Media

  ####################################################################
  # FILESYSTEM WATCHER (OPTIONAL)
  ####################################################################
  file_watcher:
    enabled: false        # When true, Playbook stays running and reacts to filesystem events
    paths: []             # Directories to watch; defaults to source_dir when empty
    include: []           # Optional glob filters (e.g. "*.mkv")
    ignore:
      - "*.part"
      - "*.tmp"
    debounce_seconds: 5
    reconcile_interval: 900

  ####################################################################
  # KOMETA CRONJOB TRIGGER (OPTIONAL)
  ####################################################################
  kometa_trigger:
    enabled: false
    mode: kubernetes         # kubernetes | docker
    namespace: media
    cronjob_name: kometa-sport
    job_name_prefix: kometa-sport-triggered-by-playbook
    docker:
      binary: docker
      image: kometateam/kometa
      config_path: /absolute/path/to/kometa/config
      container_path: /config
      volume_mode: rw
      libraries: "Sports|TV Shows - 4K"
      extra_args: []
      remove_container: true
      interactive: false

  ####################################################################
  # PLEX METADATA SYNC (OPTIONAL)
  ####################################################################
  plex_metadata_sync:
    enabled: false
    url: ${PLEX_URL:-http://plex:32400}
    token: ${PLEX_TOKEN:-}
    library_id: ${PLEX_LIBRARY_ID:-}
    library_name: ${PLEX_LIBRARY_NAME:-TV Shows}
    timeout: ${PLEX_TIMEOUT:-15}
    force: ${PLEX_FORCE:-false}
    dry_run: ${PLEX_SYNC_DRY_RUN:-false}
    sports: []
    scan_wait: ${PLEX_SCAN_WAIT:-5}

  ####################################################################
  # DEFAULT DESTINATION TEMPLATES
  ####################################################################
  destination:
    root_template: "{show_title}"
    season_dir_template: "{season_number:02d} {season_title}"
    episode_template: "{show_title} - S{season_number:02d}E{episode_number:02d} - {episode_title}.{extension}"


######################################################################
# Pattern Sets - reusable filename matchers grouped by sport
######################################################################
# Built-in pattern templates load automatically from `pattern_templates.yaml`.
# You don't need to define anything here unless adding custom patterns.
#
# Available built-in sets: formula1, formula_e, indycar, motogp, moto2,
# moto3, world_superbike, world_supersport, isle_of_man_tt, ufc, nfl,
# nba, nhl, premier_league, uefa_champions_league, figure_skating_grand_prix

pattern_sets: {}
  # Add custom pattern sets if needed:
  # my_custom_sport:
  #   - description: Custom matcher
  #     regex: >-
  #       (?i)^Example\.(?P<year>\d{4})\.(?P<session>.+)$
  #     season_selector:
  #       mode: round
  #       group: year
  #     episode_selector:
  #       group: session


######################################################################
# Sports - Override default settings or add custom sports
######################################################################
# Most users don't need to define anything here! All supported sports
# are enabled by default with the correct source_globs, pattern_sets,
# and TVSportsDB show_slugs.
#
# Use this section only to:
#   1. Override settings for a specific sport (e.g., custom quality profile)
#   2. Add a custom sport not in the defaults
#   3. Replace a default sport with different variants/slugs
#
# To disable a sport, use `disabled_sports` in settings instead.
######################################################################

sports: []
  # Example: Override F1 with custom quality preferences
  # - id: formula1
  #   name: Formula 1
  #   pattern_sets:
  #     - formula1
  #   quality_profile:
  #     enabled: true
  #     scoring:
  #       release_group:
  #         mwr: 100
  #         smcgill1969: 80
  #         verum: 60
  #     cutoff: 600
  #   variants:
  #     - year: 2025
  #       show_slug: "formula-1-2025"
  #       season_overrides:
  #         Pre-Season Testing:
  #           season_number: 0
  #           round: 0
  #     - year: 2026
  #       show_slug: "formula-1-2026"
  #       season_overrides:
  #         Pre-Season Testing:
  #           season_number: 0
  #           round: 0

  # Example: Add a custom sport not in defaults
  # - id: my_custom_sport
  #   name: My Custom Sport
  #   show_slug: "my-custom-sport-2025"
  #   source_globs:
  #     - "MyCustomSport.*"
  #   pattern_sets:
  #     - my_custom_sport  # Reference pattern set defined above
